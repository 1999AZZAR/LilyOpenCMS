{% extends 'admin_base.html' %}
{% block title %}Detail Kontak - Admin{% endblock %}
{% block hero_title %}Detail Kontak{% endblock %}
{% block hero_desc %}Kelola pengaturan detail kontak{% endblock %}
{% block content %}
<main class="container mx-auto px-6 py-12" role="main">
    <!-- Add New Contact Detail -->
    <div class="bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 p-6 rounded-lg shadow-lg mb-8" role="region" aria-labelledby="add-contact-title">
        <h2 id="add-contact-title" class="text-xl font-semibold text-amber-800 mb-4">Tambah Detail Kontak Baru</h2>
        <form action="{{ url_for('main.settings_contact_details') }}" method="POST" class="space-y-4" role="form" aria-label="Form tambah detail kontak baru">
            <!-- CSRF protection disabled for this application -->
            <input type="hidden" name="action" value="create">
            <div>
                <label for="new-title" class="block text-gray-700 font-medium mb-2">Judul</label>
                <input type="text" id="new-title" name="title" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" required aria-required="true">
            </div>
            <div>
                <label for="new-content" class="block text-gray-700 font-medium mb-2">Konten</label>
                <textarea id="new-content" name="content" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" rows="5" required aria-required="true"></textarea>
            </div>
            <div>
                <label for="new-section-order" class="block text-gray-700 font-medium mb-2">Urutan Bagian</label>
                <input type="number" id="new-section-order" name="section_order" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" required aria-required="true">
            </div>
            <div>
                <label for="new-icon-class" class="block text-gray-700 font-medium mb-2">Kelas Ikon</label>
                <select id="new-icon-class" name="icon_class" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" aria-label="Pilih ikon untuk detail kontak">
                    <option value="">-- Pilih ikon --</option>
                    <option value="envelope">Envelope</option>
                    <option value="phone">Phone</option>
                    <option value="map-marker-alt">Location</option>
                    <option value="facebook">Facebook</option>
                    <option value="twitter">Twitter</option>
                    <option value="instagram">Instagram</option>
                    <option value="linkedin">LinkedIn</option>
                    <option value="whatsapp">WhatsApp</option>
                    <option value="youtube">YouTube</option>
                    <option value="github">GitHub</option>
                    <option value="skype">Skype</option>
                    <option value="telegram">Telegram</option>
                    <option value="pinterest">Pinterest</option>
                </select>
            </div>
            <div>
                <label for="new-link" class="block text-gray-700 font-medium mb-2">Tautan</label>
                <input type="url" id="new-link" name="link" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="mis. mailto:you@contoh.com" aria-label="Masukkan tautan untuk detail kontak">
            </div>
            <button type="submit" class="w-full bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white py-3 rounded-lg font-semibold focus:outline-none focus:ring-2 focus:ring-amber-300 transition-all duration-300 shadow-md" aria-label="Tambah detail kontak baru">Tambah Detail Kontak</button>
        </form>
    </div>

    <!-- Existing Contact Details -->
    <div class="bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 p-6 rounded-lg shadow-lg" role="region" aria-labelledby="existing-contacts-title">
        <h2 id="existing-contacts-title" class="text-xl font-semibold text-amber-800 mb-4">Detail Kontak yang Ada</h2>
        <div class="space-y-4" role="list" aria-label="Daftar detail kontak yang ada">
            {% for detail in contact_details %}
            <div class="bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 p-4 rounded-lg shadow-lg space-y-4" role="listitem" aria-label="Detail kontak: {{ detail.title }}">
                <form action="{{ url_for('main.settings_contact_details') }}" method="POST" class="space-y-4" role="form" aria-label="Form edit detail kontak: {{ detail.title }}">
                    <!-- CSRF protection disabled for this application -->
                    <input type="hidden" name="detail_id" value="{{ detail.id }}">
                    <input type="hidden" name="action" value="update">
                    <div>
                        <label for="title_{{ detail.id }}" class="block text-gray-700 font-medium mb-2">Judul</label>
                        <input type="text" id="title_{{ detail.id }}" name="title" value="{{ detail.title }}" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" required aria-required="true">
                    </div>
                    <div>
                        <label for="content_{{ detail.id }}" class="block text-gray-700 font-medium mb-2">Konten</label>
                        <textarea id="content_{{ detail.id }}" name="content" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" rows="5" required aria-required="true">{{ detail.content }}</textarea>
                    </div>
                    <div>
                        <label for="section_order_{{ detail.id }}" class="block text-gray-700 font-medium mb-2">Urutan Bagian</label>
                        <input type="number" id="section_order_{{ detail.id }}" name="section_order" value="{{ detail.section_order }}" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" required aria-required="true">
                    </div>
                    <div>
                        <label for="icon_class_{{ detail.id }}" class="block text-gray-700 font-medium mb-2">Kelas Ikon</label>
                        <select id="icon_class_{{ detail.id }}" name="icon_class" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" aria-label="Pilih ikon untuk detail kontak">
                            <option value="" disabled {% if not detail.icon_class %}selected{% endif %}>-- Pilih ikon --</option>
                            <option value="envelope" {% if detail.icon_class=='envelope' %}selected{% endif %}>Envelope</option>
                            <option value="phone" {% if detail.icon_class=='phone' %}selected{% endif %}>Phone</option>
                            <option value="map-marker-alt" {% if detail.icon_class=='map-marker-alt' %}selected{% endif %}>Location</option>
                            <option value="facebook" {% if detail.icon_class=='facebook' %}selected{% endif %}>Facebook</option>
                            <option value="twitter" {% if detail.icon_class=='twitter' %}selected{% endif %}>Twitter</option>
                            <option value="instagram" {% if detail.icon_class=='instagram' %}selected{% endif %}>Instagram</option>
                            <option value="linkedin" {% if detail.icon_class=='linkedin' %}selected{% endif %}>LinkedIn</option>
                            <option value="whatsapp" {% if detail.icon_class=='whatsapp' %}selected{% endif %}>WhatsApp</option>
                            <option value="youtube" {% if detail.icon_class=='youtube' %}selected{% endif %}>YouTube</option>
                            <option value="github" {% if detail.icon_class=='github' %}selected{% endif %}>GitHub</option>
                            <option value="skype" {% if detail.icon_class=='skype' %}selected{% endif %}>Skype</option>
                            <option value="telegram" {% if detail.icon_class=='telegram' %}selected{% endif %}>Telegram</option>
                            <option value="pinterest" {% if detail.icon_class=='pinterest' %}selected{% endif %}>Pinterest</option>
                        </select>
                    </div>
                    <div>
                        <label for="link_{{ detail.id }}" class="block text-gray-700 font-medium mb-2">Tautan</label>
                        <input type="url" id="link_{{ detail.id }}" name="link" value="{{ detail.link }}" class="w-full bg-white border border-gray-300 text-gray-700 p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" aria-label="Masukkan tautan untuk detail kontak">
                    </div>
                    <div class="flex items-center space-x-2">
                        <input type="checkbox" name="is_active" id="is_active_{{ detail.id }}" class="rounded border-gray-300 text-green-500 focus:ring-green-300" {% if detail.is_active %}checked{% endif %} aria-label="Aktifkan detail kontak">
                        <label for="is_active_{{ detail.id }}" class="text-gray-700">Aktif</label>
                    </div>
                    <div class="flex space-x-4" role="group" aria-label="Tombol aksi untuk detail kontak">
                        <button type="submit" class="flex-1 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white py-2 rounded-lg font-semibold focus:outline-none focus:ring-2 focus:ring-amber-300 transition-all duration-300 shadow-md" aria-label="Perbarui detail kontak">Perbarui</button>
                        <button type="button" onclick="openDeleteModal(this.form)" class="flex-1 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white py-2 rounded-lg font-semibold focus:outline-none focus:ring-2 focus:ring-red-300 transition-all duration-300 shadow-md" aria-label="Hapus detail kontak">Hapus</button>
                    </div>
                </form>
            </div>
            {% endfor %}
        </div>
    </div>
</main>

<!-- Delete Confirmation Modal for Contact Details -->
<div id="delete-confirm-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" role="dialog" aria-labelledby="delete-modal-title" aria-modal="true">
  <div class="bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 p-6 rounded-lg shadow-xl w-full max-w-sm">
    <h3 id="delete-modal-title" class="text-xl font-semibold text-amber-800 mb-4">Konfirmasi Hapus</h3>
    <p class="mb-4 text-amber-700">Apakah Anda yakin ingin menghapus detail kontak ini?</p>
    <div class="flex justify-end space-x-4" role="group" aria-label="Tombol konfirmasi hapus">
      <button id="confirm-delete-btn" type="button" class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-semibold focus:outline-none focus:ring-2 focus:ring-red-300 transition-all duration-300 shadow-md" aria-label="Konfirmasi hapus detail kontak">Hapus</button>
      <button type="button" onclick="closeDeleteModal()" class="bg-gradient-to-r from-amber-300 to-yellow-300 hover:from-amber-400 hover:to-yellow-400 text-amber-800 px-4 py-2 rounded-lg font-semibold focus:outline-none focus:ring-2 focus:ring-amber-300 transition-all duration-300 shadow-md" aria-label="Batal hapus detail kontak">Batal</button>
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='js/contact-details-management.js') }}"></script>
{% endblock %}
