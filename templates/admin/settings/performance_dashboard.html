{% extends 'admin_base.html' %}

{% block title %}Dashboard Performa - Admin{% endblock %}
{% block hero_title %}Dashboard Performa{% endblock %}
{% block hero_desc %}Monitor performa sistem dan optimasi real-time{% endblock %}

{% block content %}
<div id="toast-container" class="fixed top-5 right-5 space-y-2 z-50" role="status" aria-live="polite"></div>

<!-- Navigation Tabs -->
<div class="mb-6">
  <nav class="flex space-x-1 bg-amber-100 p-1 rounded-lg" role="tablist">
    <button class="tab-button active bg-white text-amber-800 px-4 py-2 rounded-md font-medium" data-tab="overview">
      <i class="fas fa-chart-line mr-2"></i>Ringkasan
    </button>
    <button class="tab-button bg-amber-200 text-amber-700 px-4 py-2 rounded-md font-medium" data-tab="routes">
      <i class="fas fa-route mr-2"></i>Performa Rute
    </button>
    <button class="tab-button bg-amber-200 text-amber-700 px-4 py-2 rounded-md font-medium" data-tab="database">
      <i class="fas fa-database mr-2"></i>Database
    </button>
    <button class="tab-button bg-amber-200 text-amber-700 px-4 py-2 rounded-md font-medium" data-tab="cache">
      <i class="fas fa-memory mr-2"></i>Cache
    </button>
  </nav>
</div>

<!-- Overview Tab -->
<div id="overview-tab" class="tab-content active">
  <main class="bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 p-6 rounded-lg shadow-lg mb-8" role="main">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-semibold text-amber-800">Ringkasan Performa Sistem</h2>
      <div class="flex space-x-2">
        <button id="refresh-performance" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-sync-alt mr-2"></i>Segarkan
        </button>
        <button id="clear-cache" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-trash mr-2"></i>Bersihkan Cache
        </button>
      </div>
    </div>

    <!-- System Metrics Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- CPU Usage -->
      <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-microchip text-blue-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Penggunaan CPU</p>
            <p class="text-2xl font-bold text-gray-900">
              {{ "%.1f"|format(performance_summary.system.cpu_percent|default(0)) }}%
            </p>
          </div>
        </div>
        <div class="mt-4">
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-blue-600 h-2 rounded-full" style="width: {{ performance_summary.system.cpu_percent|default(0) }}%"></div>
          </div>
        </div>
      </div>

      <!-- Memory Usage -->
      <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-memory text-green-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Penggunaan Memori</p>
            <p class="text-2xl font-bold text-gray-900">
              {{ "%.1f"|format(performance_summary.system.memory_percent|default(0)) }}%
            </p>
          </div>
        </div>
        <div class="mt-4">
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-green-600 h-2 rounded-full" style="width: {{ performance_summary.system.memory_percent|default(0) }}%"></div>
          </div>
        </div>
      </div>

      <!-- Disk Usage -->
      <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-hdd text-purple-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Penggunaan Disk</p>
            <p class="text-2xl font-bold text-gray-900">
              {{ "%.1f"|format(performance_summary.system.disk_percent|default(0)) }}%
            </p>
          </div>
        </div>
        <div class="mt-4">
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-purple-600 h-2 rounded-full" style="width: {{ performance_summary.system.disk_percent|default(0) }}%"></div>
          </div>
        </div>
      </div>

      <!-- Total Requests -->
      <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-amber-500">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-chart-line text-amber-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Total Request</p>
            <p class="text-2xl font-bold text-gray-900">
              {{ performance_summary.total_requests|default(0) }}
            </p>
          </div>
        </div>
        <div class="mt-4">
          <span class="text-xs text-amber-600 bg-amber-100 px-2 py-1 rounded-full">
            <i class="fas fa-clock mr-1"></i>Real-time
          </span>
        </div>
      </div>
    </div>

    <!-- Additional System Metrics -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <!-- Load Average -->
      <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-indigo-500">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-tachometer-alt text-indigo-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Load Average</p>
            <p class="text-2xl font-bold text-gray-900">{{ performance_summary.system.load_avg_1min|default(0) }}</p>
            <p class="text-xs text-gray-500">1min / {{ performance_summary.system.load_avg_5min|default(0) }} 5min / {{ performance_summary.system.load_avg_15min|default(0) }} 15min</p>
          </div>
        </div>
      </div>

      <!-- Process Memory -->
      <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-red-500">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-cogs text-red-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Process Memory</p>
            <p class="text-2xl font-bold text-gray-900">{{ performance_summary.system.process_memory_mb|default(0) }}MB</p>
            <p class="text-xs text-gray-500">Application Usage</p>
          </div>
        </div>
      </div>

      <!-- Active Connections -->
      <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-teal-500">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-plug text-teal-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Active Connections</p>
            <p class="text-2xl font-bold text-gray-900">{{ performance_summary.system.active_connections|default(0) }}</p>
            <p class="text-xs text-gray-500">Network Connections</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Network Activity -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <!-- Network Sent -->
      <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-upload text-blue-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Network Sent</p>
            <p class="text-2xl font-bold text-gray-900">{{ performance_summary.system.network_bytes_sent_mb|default(0) }}MB</p>
            <p class="text-xs text-gray-500">Data Transmitted</p>
          </div>
        </div>
      </div>

      <!-- Network Received -->
      <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-download text-green-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Network Received</p>
            <p class="text-2xl font-bold text-gray-900">{{ performance_summary.system.network_bytes_recv_mb|default(0) }}MB</p>
            <p class="text-xs text-gray-500">Data Received</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Performance Alerts -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">Peringatan Performa</h3>
      <div class="space-y-3">
        {% if performance_summary.system.cpu_percent|default(0) > 80 %}
        <div class="flex items-center p-3 bg-red-50 border border-red-200 rounded-lg">
          <i class="fas fa-exclamation-triangle text-red-500 mr-3"></i>
          <span class="text-red-700">CPU usage tinggi: {{ "%.1f"|format(performance_summary.system.cpu_percent|default(0)) }}%</span>
        </div>
        {% endif %}
        {% if performance_summary.system.memory_percent|default(0) > 85 %}
        <div class="flex items-center p-3 bg-red-50 border border-red-200 rounded-lg">
          <i class="fas fa-exclamation-triangle text-red-500 mr-3"></i>
          <span class="text-red-700">Memory usage tinggi: {{ "%.1f"|format(performance_summary.system.memory_percent|default(0)) }}%</span>
        </div>
        {% endif %}
        {% if performance_summary.system.disk_percent|default(0) > 90 %}
        <div class="flex items-center p-3 bg-red-50 border border-red-200 rounded-lg">
          <i class="fas fa-exclamation-triangle text-red-500 mr-3"></i>
          <span class="text-red-700">Disk usage tinggi: {{ "%.1f"|format(performance_summary.system.disk_percent|default(0)) }}%</span>
        </div>
        {% endif %}
        {% if performance_summary.system.cpu_percent|default(0) <= 80 and performance_summary.system.memory_percent|default(0) <= 85 and performance_summary.system.disk_percent|default(0) <= 90 %}
        <div class="flex items-center p-3 bg-green-50 border border-green-200 rounded-lg">
          <i class="fas fa-check-circle text-green-500 mr-3"></i>
          <span class="text-green-700">Semua sistem berjalan dengan baik</span>
        </div>
        {% endif %}
      </div>
    </div>
  </main>
</div>

<!-- Routes Performance Tab -->
<div id="routes-tab" class="tab-content hidden">
  <main class="bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 p-6 rounded-lg shadow-lg mb-8" role="main">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-semibold text-amber-800">Performa Rute</h2>
      <button id="refresh-routes" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-medium">
        <i class="fas fa-sync-alt mr-2"></i>Segarkan
      </button>
    </div>

    <!-- Routes Table -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rute</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Request</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rata-rata (ms)</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Min (ms)</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Max (ms)</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Terakhir</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            {% for route, metrics in performance_summary.routes.items() %}
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ route }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ metrics.count|default(0) }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ "%.2f"|format(metrics.avg_time|default(0) * 1000) }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ "%.2f"|format(metrics.min_time|default(0) * 1000) }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ "%.2f"|format(metrics.max_time|default(0) * 1000) }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ metrics.last_request|default('N/A') }}</td>
            </tr>
            {% else %}
            <tr>
              <td colspan="6" class="px-6 py-4 text-center text-gray-500">
                <i class="fas fa-info-circle text-xl"></i>
                <p class="mt-2">Belum ada data performa rute</p>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </main>
</div>

<!-- Database Tab -->
<div id="database-tab" class="tab-content hidden">
  <main class="bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 p-6 rounded-lg shadow-lg mb-8" role="main">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-semibold text-amber-800">Performa Database</h2>
      <div class="flex space-x-2">
        <button id="optimize-database" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-cogs mr-2"></i>Optimize DB
        </button>
        <button id="cleanup-database" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-broom mr-2"></i>Cleanup
        </button>
        <button id="backup-database" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-download mr-2"></i>Create Backup
        </button>
        <button id="list-backups" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-list mr-2"></i>List Backups
        </button>
        <button id="refresh-database" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-sync-alt mr-2"></i>Refresh
        </button>
      </div>
    </div>

    <!-- Database Metrics -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-database text-blue-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Total Query</p>
            <p class="text-2xl font-bold text-gray-900" id="total-query">{{ performance_summary.database.query_count|default(0) if performance_summary.database else 0 }}</p>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-clock text-green-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Rata-rata Waktu</p>
            <p class="text-2xl font-bold text-gray-900" id="avg-query-time">{{ "%.2f"|format(performance_summary.database.avg_query_time|default(0)) if performance_summary.database else "0.00" }}ms</p>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Query Lambat</p>
            <p class="text-2xl font-bold text-gray-900" id="slow-queries">{{ performance_summary.database.slow_queries|default(0) if performance_summary.database else "0" }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Database Management -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">Database Management</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="p-4 border border-gray-200 rounded-lg">
          <h4 class="font-medium text-gray-700 mb-2">Database Tables</h4>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span>Users:</span>
              <span class="text-blue-600" id="users-count">-</span>
            </div>
            <div class="flex justify-between">
              <span>News:</span>
              <span class="text-green-600" id="news-count">-</span>
            </div>
            <div class="flex justify-between">
              <span>Albums:</span>
              <span class="text-amber-600" id="albums-count">-</span>
            </div>
            <div class="flex justify-between">
              <span>Chapters:</span>
              <span class="text-orange-600" id="chapters-count">-</span>
            </div>
            <div class="flex justify-between">
              <span>Images:</span>
              <span class="text-purple-600" id="images-count">-</span>
            </div>
            <div class="flex justify-between">
              <span>Categories:</span>
              <span class="text-indigo-600" id="categories-count">-</span>
            </div>
            <div class="flex justify-between">
              <span>Comments:</span>
              <span class="text-pink-600" id="comments-count">-</span>
            </div>
            <div class="flex justify-between">
              <span>Ratings:</span>
              <span class="text-red-600" id="ratings-count">-</span>
            </div>
            <div class="flex justify-between">
              <span>Activities:</span>
              <span class="text-gray-600" id="activities-count">-</span>
            </div>
          </div>
        </div>
        <div class="p-4 border border-gray-200 rounded-lg">
          <h4 class="font-medium text-gray-700 mb-2">Database Info</h4>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span>Size:</span>
              <span class="text-blue-600" id="database-size">-</span>
            </div>
            <div class="flex justify-between">
              <span>Type:</span>
              <span class="text-green-600" id="database-type">-</span>
            </div>
            <div class="flex justify-between">
              <span>Integrity:</span>
              <span class="text-purple-600" id="database-integrity">-</span>
            </div>
          </div>
        </div>
        <div class="p-4 border border-gray-200 rounded-lg">
          <h4 class="font-medium text-gray-700 mb-2">Detailed Stats</h4>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span>Active Users:</span>
              <span class="text-blue-600" id="active-users">-</span>
            </div>
            <div class="flex justify-between">
              <span>Suspended Users:</span>
              <span class="text-red-600" id="suspended-users">-</span>
            </div>
            <div class="flex justify-between">
              <span>Admin Users:</span>
              <span class="text-purple-600" id="admin-users">-</span>
            </div>
            <div class="flex justify-between">
              <span>Published News:</span>
              <span class="text-green-600" id="published-news">-</span>
            </div>
            <div class="flex justify-between">
              <span>Draft News:</span>
              <span class="text-orange-600" id="draft-news">-</span>
            </div>
            <div class="flex justify-between">
              <span>Featured News:</span>
              <span class="text-purple-600" id="featured-news">-</span>
            </div>
            <div class="flex justify-between">
              <span>Published Albums:</span>
              <span class="text-amber-600" id="published-albums">-</span>
            </div>
            <div class="flex justify-between">
              <span>Hidden Albums:</span>
              <span class="text-gray-600" id="hidden-albums">-</span>
            </div>
            <div class="flex justify-between">
              <span>Premium Albums:</span>
              <span class="text-yellow-600" id="premium-albums">-</span>
            </div>
            <div class="flex justify-between">
              <span>Completed Albums:</span>
              <span class="text-green-600" id="completed-albums">-</span>
            </div>
            <div class="flex justify-between">
              <span>Published Chapters:</span>
              <span class="text-orange-600" id="published-chapters">-</span>
            </div>
            <div class="flex justify-between">
              <span>Hidden Chapters:</span>
              <span class="text-gray-600" id="hidden-chapters">-</span>
            </div>
            <div class="flex justify-between">
              <span>Active Categories:</span>
              <span class="text-indigo-600" id="active-categories">-</span>
            </div>
            <div class="flex justify-between">
              <span>Approved Comments:</span>
              <span class="text-pink-600" id="approved-comments">-</span>
            </div>
            <div class="flex justify-between">
              <span>Pending Comments:</span>
              <span class="text-orange-600" id="pending-comments">-</span>
            </div>
            <div class="flex justify-between">
              <span>Average Rating:</span>
              <span class="text-red-600" id="average-rating">-</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- Cache Tab -->
<div id="cache-tab" class="tab-content hidden">
  <main class="bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 p-6 rounded-lg shadow-lg mb-8" role="main">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-semibold text-amber-800">Performa Cache</h2>
      <div class="flex space-x-2">
        <button id="invalidate-news-cache" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-newspaper mr-2"></i>Invalidate News
        </button>
        <button id="invalidate-albums-cache" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-book mr-2"></i>Invalidate Albums
        </button>
        <button id="invalidate-chapters-cache" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-list mr-2"></i>Invalidate Chapters
        </button>
        <button id="invalidate-users-cache" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-users mr-2"></i>Invalidate Users
        </button>
        <button id="clear-all-cache" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-trash mr-2"></i>Clear All
        </button>
        <button id="refresh-cache" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-medium">
          <i class="fas fa-sync-alt mr-2"></i>Refresh
        </button>
      </div>
    </div>

    <!-- Cache Metrics -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-memory text-purple-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Hit Rate</p>
            <p class="text-2xl font-bold text-gray-900">{{ "%.1f"|format(performance_summary.cache.hit_rate|default(0)) if performance_summary.cache else "0.0" }}%</p>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-times-circle text-red-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Miss Rate</p>
            <p class="text-2xl font-bold text-gray-900">{{ "%.1f"|format(performance_summary.cache.miss_rate|default(0)) if performance_summary.cache else "0.0" }}%</p>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i class="fas fa-chart-line text-amber-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-500">Total Request</p>
            <p class="text-2xl font-bold text-gray-900">{{ performance_summary.cache.total_requests|default(0) if performance_summary.cache else "0" }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Cache Management -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">Cache Management</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="p-4 border border-gray-200 rounded-lg">
          <h4 class="font-medium text-gray-700 mb-2">Cache Patterns</h4>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span>News Cache:</span>
              <span class="text-blue-600">lilycms_news_*</span>
            </div>
            <div class="flex justify-between">
              <span>Users Cache:</span>
              <span class="text-purple-600">lilycms_users_*</span>
            </div>
            <div class="flex justify-between">
              <span>Categories Cache:</span>
              <span class="text-green-600">lilycms_categories_*</span>
            </div>
            <div class="flex justify-between">
              <span>Images Cache:</span>
              <span class="text-orange-600">lilycms_images_*</span>
            </div>
          </div>
        </div>
        <div class="p-4 border border-gray-200 rounded-lg">
          <h4 class="font-medium text-gray-700 mb-2">Cache Actions</h4>
          <div class="space-y-2 text-sm">
            <p class="text-gray-600">• Invalidate specific cache patterns</p>
            <p class="text-gray-600">• Clear all cache entries</p>
            <p class="text-gray-600">• Monitor cache performance</p>
            <p class="text-gray-600">• View cache statistics</p>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

<script src="{{ url_for('static', filename='js/performance-dashboard.js') }}"></script>
{% endblock %} 