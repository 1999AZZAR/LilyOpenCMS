{% extends 'admin_base.html' %}

{% block title %}Analitik SEO - Admin{% endblock %}
{% block hero_title %}Analitik SEO{% endblock %}
{% block hero_desc %}Statistik dan analisis performa SEO website{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/comprehensive-seo-management.css') }}">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
<div id="toast-container" class="fixed top-5 right-5 space-y-2 z-50" role="status" aria-live="polite"></div>

<!-- Main Content -->
<div class="space-y-8">
  <!-- Overview Stats -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- Total Content -->
    <div class="bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 p-6 rounded-lg shadow-lg">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-blue-600">Total Konten</p>
          <p class="text-2xl font-bold text-blue-900" id="total-content">-</p>
        </div>
        <div class="h-12 w-12 rounded-lg bg-blue-500 text-white flex items-center justify-center">
          <i class="fas fa-file-alt text-xl"></i>
        </div>
      </div>
      <div class="mt-4">
        <div class="flex items-center text-sm">
          <span class="text-blue-600 font-medium">Artikel:</span>
          <span class="ml-2 text-blue-800" id="total-articles">-</span>
        </div>
        <div class="flex items-center text-sm">
          <span class="text-blue-600 font-medium">Album:</span>
          <span class="ml-2 text-blue-800" id="total-albums">-</span>
        </div>
        <div class="flex items-center text-sm">
          <span class="text-blue-600 font-medium">Bab:</span>
          <span class="ml-2 text-blue-800" id="total-chapters">-</span>
        </div>
      </div>
    </div>

    <!-- SEO Score Average -->
    <div class="bg-gradient-to-br from-green-50 to-green-100 border border-green-200 p-6 rounded-lg shadow-lg">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-green-600">Rata-rata Skor SEO</p>
          <p class="text-2xl font-bold text-green-900" id="avg-seo-score">-</p>
        </div>
        <div class="h-12 w-12 rounded-lg bg-green-500 text-white flex items-center justify-center">
          <i class="fas fa-chart-line text-xl"></i>
        </div>
      </div>
      <div class="mt-4">
        <div class="w-full bg-green-200 rounded-full h-2">
          <div class="bg-green-500 h-2 rounded-full" id="seo-score-progress" style="width: 0%"></div>
        </div>
        <p class="text-xs text-green-600 mt-1">Target: 80+</p>
      </div>
    </div>

    <!-- SEO Complete Rate -->
    <div class="bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 p-6 rounded-lg shadow-lg">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-purple-600">Tingkat Kelengkapan SEO</p>
          <p class="text-2xl font-bold text-purple-900" id="seo-completion-rate">-</p>
        </div>
        <div class="h-12 w-12 rounded-lg bg-purple-500 text-white flex items-center justify-center">
          <i class="fas fa-check-circle text-xl"></i>
        </div>
      </div>
      <div class="mt-4">
        <div class="w-full bg-purple-200 rounded-full h-2">
          <div class="bg-purple-500 h-2 rounded-full" id="completion-progress" style="width: 0%"></div>
        </div>
        <p class="text-xs text-purple-600 mt-1">Konten dengan SEO lengkap</p>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="bg-gradient-to-br from-orange-50 to-orange-100 border border-orange-200 p-6 rounded-lg shadow-lg">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-orange-600">Aktivitas Terbaru</p>
          <p class="text-2xl font-bold text-orange-900" id="recent-activity-count">-</p>
        </div>
        <div class="h-12 w-12 rounded-lg bg-orange-500 text-white flex items-center justify-center">
          <i class="fas fa-clock text-xl"></i>
        </div>
      </div>
      <div class="mt-4">
        <p class="text-xs text-orange-600">Update SEO dalam 7 hari terakhir</p>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- SEO Score Distribution -->
    <div class="bg-white border border-gray-200 p-6 rounded-lg shadow-lg">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">Distribusi Skor SEO</h3>
      <div class="h-64">
        <canvas id="seo-score-chart"></canvas>
      </div>
    </div>

    <!-- Content Type Performance -->
    <div class="bg-white border border-gray-200 p-6 rounded-lg shadow-lg">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">Performa per Jenis Konten</h3>
      <div class="h-64">
        <canvas id="content-performance-chart"></canvas>
      </div>
    </div>
  </div>

  <!-- SEO Status Breakdown -->
  <div class="bg-white border border-gray-200 p-6 rounded-lg shadow-lg">
    <h3 class="text-lg font-semibold text-gray-900 mb-6">Breakdown Status SEO</h3>
    
    <!-- Filter Controls -->
    <div class="flex flex-wrap gap-4 mb-6">
      <button class="filter-btn active bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium" data-filter="all">
        Semua
      </button>
      <button class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium" data-filter="articles">
        Artikel
      </button>
      <button class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium" data-filter="albums">
        Album
      </button>
      <button class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium" data-filter="chapters">
        Bab
      </button>
    </div>

    <!-- Status Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Complete SEO -->
      <div class="bg-green-50 border border-green-200 p-6 rounded-lg">
        <div class="flex items-center justify-between mb-4">
          <h4 class="text-lg font-semibold text-green-800">SEO Lengkap</h4>
          <div class="h-8 w-8 rounded-full bg-green-500 text-white flex items-center justify-center">
            <i class="fas fa-check text-sm"></i>
          </div>
        </div>
        <div class="space-y-3">
          <div class="flex justify-between items-center">
            <span class="text-sm text-green-700">Artikel:</span>
            <span class="font-semibold text-green-800" id="complete-articles">-</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-green-700">Album:</span>
            <span class="font-semibold text-green-800" id="complete-albums">-</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-green-700">Bab:</span>
            <span class="font-semibold text-green-800" id="complete-chapters">-</span>
          </div>
          <div class="pt-2 border-t border-green-200">
            <div class="flex justify-between items-center">
              <span class="text-sm font-medium text-green-700">Total:</span>
              <span class="font-bold text-green-800" id="complete-total">-</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Incomplete SEO -->
      <div class="bg-yellow-50 border border-yellow-200 p-6 rounded-lg">
        <div class="flex items-center justify-between mb-4">
          <h4 class="text-lg font-semibold text-yellow-800">SEO Tidak Lengkap</h4>
          <div class="h-8 w-8 rounded-full bg-yellow-500 text-white flex items-center justify-center">
            <i class="fas fa-exclamation-triangle text-sm"></i>
          </div>
        </div>
        <div class="space-y-3">
          <div class="flex justify-between items-center">
            <span class="text-sm text-yellow-700">Artikel:</span>
            <span class="font-semibold text-yellow-800" id="incomplete-articles">-</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-yellow-700">Album:</span>
            <span class="font-semibold text-yellow-800" id="incomplete-albums">-</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-yellow-700">Bab:</span>
            <span class="font-semibold text-yellow-800" id="incomplete-chapters">-</span>
          </div>
          <div class="pt-2 border-t border-yellow-200">
            <div class="flex justify-between items-center">
              <span class="text-sm font-medium text-yellow-700">Total:</span>
              <span class="font-bold text-yellow-800" id="incomplete-total">-</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Missing SEO -->
      <div class="bg-red-50 border border-red-200 p-6 rounded-lg">
        <div class="flex items-center justify-between mb-4">
          <h4 class="text-lg font-semibold text-red-800">SEO Hilang</h4>
          <div class="h-8 w-8 rounded-full bg-red-500 text-white flex items-center justify-center">
            <i class="fas fa-times text-sm"></i>
          </div>
        </div>
        <div class="space-y-3">
          <div class="flex justify-between items-center">
            <span class="text-sm text-red-700">Artikel:</span>
            <span class="font-semibold text-red-800" id="missing-articles">-</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-red-700">Album:</span>
            <span class="font-semibold text-red-800" id="missing-albums">-</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-red-700">Bab:</span>
            <span class="font-semibold text-red-800" id="missing-chapters">-</span>
          </div>
          <div class="pt-2 border-t border-red-200">
            <div class="flex justify-between items-center">
              <span class="text-sm font-medium text-red-700">Total:</span>
              <span class="font-bold text-red-800" id="missing-total">-</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent SEO Activity -->
  <div class="bg-white border border-gray-200 p-6 rounded-lg shadow-lg">
    <div class="flex justify-between items-center mb-6">
      <h3 class="text-lg font-semibold text-gray-900">Aktivitas SEO Terbaru</h3>
      <button id="refresh-analytics" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300">
        <i class="fas fa-sync-alt mr-2"></i>Segarkan
      </button>
    </div>
    
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Waktu</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jenis</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Konten</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Skor Sebelum</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Skor Sesudah</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
          </tr>
        </thead>
        <tbody id="activity-table-body" class="bg-white divide-y divide-gray-200">
          <tr>
            <td colspan="7" class="px-6 py-4 text-center text-gray-500">
              <i class="fas fa-spinner fa-spin text-xl"></i>
              <p class="mt-2">Memuat aktivitas...</p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- SEO Recommendations -->
  <div class="bg-white border border-gray-200 p-6 rounded-lg shadow-lg">
    <h3 class="text-lg font-semibold text-gray-900 mb-6">Rekomendasi SEO</h3>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Priority Actions -->
      <div class="bg-red-50 border border-red-200 p-4 rounded-lg">
        <h4 class="font-semibold text-red-800 mb-3">
          <i class="fas fa-exclamation-triangle mr-2"></i>Aksi Prioritas
        </h4>
        <div id="priority-actions" class="space-y-2">
          <div class="text-sm text-red-700">Memuat rekomendasi...</div>
        </div>
      </div>

      <!-- Improvement Suggestions -->
      <div class="bg-blue-50 border border-blue-200 p-4 rounded-lg">
        <h4 class="font-semibold text-blue-800 mb-3">
          <i class="fas fa-lightbulb mr-2"></i>Saran Peningkatan
        </h4>
        <div id="improvement-suggestions" class="space-y-2">
          <div class="text-sm text-blue-700">Memuat saran...</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='js/seo-analytics.js') }}"></script>
{% endblock %}
